{% extends "automovel/base.html" %}
{% block title %}Assinar Agendamento{% endblock %}
{% block extra_css %}
{% endblock %}
{% block extra_js %}
{% endblock %}
<h1>Assinar Agendamento</h1>
{% block content %}
<div class="container">
    <h2>Adicionar Assinatura para Agendamento #{{ object.id }}</h2>
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            {{ form.as_p }}
        </div>
        <button type="submit" class="btn btn-primary">Salvar Assinatura</button>
        <a href="{% url 'automovel:lista_agendamentos' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const canvas = document.getElementById('signature-pad');
        const signaturePad = new SignaturePad(canvas);
        
        document.getElementById('clear').addEventListener('click', function() {
            signaturePad.clear();
        });
        
        document.getElementById('save').addEventListener('click', function() {
            if (signaturePad.isEmpty()) {
                alert('Por favor, forne√ßa sua assinatura.');
            } else {
                const signatureInput = document.getElementById('id_assinatura');
                signatureInput.value = signaturePad.toDataURL();
                document.forms[0].submit();
            }
        });
    });
</script>

{% endblock %}


