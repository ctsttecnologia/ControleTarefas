{% extends "automovel/base.html" %}

{% block title %}Assinar Agendamento{% endblock %}

{% block extra_css %}

{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const canvas = document.getElementById('signature-pad');
        const signaturePad = new SignaturePad(canvas);
        
        document.getElementById('clear').addEventListener('click', function() {
            signaturePad.clear();
        });
        
        document.getElementById('save').addEventListener('click', function() {
            if (signaturePad.isEmpty()) {
                alert('Por favor, forneça sua assinatura.');
            } else {
                const signatureInput = document.getElementById('id_assinatura');
                signatureInput.value = signaturePad.toDataURL();
                document.forms[0].submit();
            }
        });
    });
</script>
{% endblock %}

{% block content %}
<h1>Assinar Agendamento</h1>

<div class="container">
    <h2>Assinar Agendamento #{{ agendamento.id }}</h2>
    
    <form method="post">
        {% csrf_token %}
        
        <!-- Campos ocultos para o cliente -->
        {% if form.cliente %}
            {{ form.cliente }}
        {% endif %}
        
        <!-- Outros campos do formulário -->
        {{ form.as_p }}
        
        <button type="submit" class="btn btn-primary">Assinar</button>
    </form>
</div>
{% endblock %}


