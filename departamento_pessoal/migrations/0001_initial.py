# Generated by Django 5.2 on 2025-05-24 15:30

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('logradouro', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='Cbos',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(help_text='Formato: XXXX-X', max_length=10, unique=True, validators=[django.core.validators.RegexValidator(message='Formato do CBO deve ser XXXX-X', regex='^\\d{4}-\\d{1}$')], verbose_name='Código CBO')),
                ('descricao', models.CharField(max_length=100, verbose_name='Descrição da Ocupação')),
                ('data_atualizacao', models.DateField(auto_now=True, verbose_name='Data de Atualização')),
            ],
            options={
                'verbose_name': 'Classificação Brasileira de Ocupações',
                'verbose_name_plural': 'Classificações Brasileiras de Ocupações',
                'db_table': 'cbos',
                'ordering': ['codigo'],
            },
        ),
        migrations.CreateModel(
            name='Departamentos',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(help_text='Nome completo do departamento', max_length=50, unique=True, verbose_name='Nome do Departamento')),
                ('sigla', models.CharField(help_text='Sigla abreviada do departamento', max_length=10, unique=True, verbose_name='Sigla')),
                ('tipo', models.CharField(choices=[('ADM', 'Administrativo'), ('OPR', 'Operacional'), ('COM', 'Comercial'), ('FIN', 'Financeiro'), ('RH', 'Recursos Humanos'), ('PCM', 'Planejamento'), ('TST', 'Seguraça do Trabalho'), ('DP', 'Departamento Pessoal')], default='OUT', max_length=3, verbose_name='Tipo de Departamento')),
                ('data_criacao', models.DateField(default=django.utils.timezone.now, verbose_name='Data de Criação')),
                ('ativo', models.BooleanField(default=True, verbose_name='Departamento Ativo?')),
                ('centro_custo', models.CharField(blank=True, help_text='Código do centro de custo associado', max_length=20, null=True, unique=True, verbose_name='Centro de Custo')),
                ('data_atualizacao', models.DateTimeField(auto_now=True, verbose_name='Última Atualização')),
            ],
            options={
                'verbose_name': 'Documento Pessoal',
                'verbose_name_plural': 'Documentos Pessoais',
                'db_table': 'documentos',
            },
        ),
        migrations.CreateModel(
            name='Documentos',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cpf', models.CharField(help_text='11 dígitos', max_length=11, unique=True, validators=[django.core.validators.RegexValidator(message='CPF deve conter exatamente 11 dígitos', regex='^\\d{11}$')], verbose_name='CPF')),
                ('pis', models.CharField(help_text='11 ou 12 dígitos', max_length=12, unique=True, validators=[django.core.validators.RegexValidator(message='PIS deve conter 11 ou 12 dígitos', regex='^\\d{11,12}$')], verbose_name='PIS/PASEP')),
                ('ctps', models.CharField(help_text='Número da Carteira de Trabalho', max_length=10, unique=True, validators=[django.core.validators.RegexValidator(message='CTPS deve conter entre 5 e 10 caracteres alfanuméricos', regex='^[A-Za-z0-9]{5,10}$')], verbose_name='CTPS')),
                ('serie', models.CharField(max_length=10, unique=True, verbose_name='Série')),
                ('uf', models.CharField(blank=True, max_length=3, null=True, validators=[django.core.validators.RegexValidator(message='UF deve ser a sigla de 2 letras maiúsculas', regex='^[A-Z]{2}$')], verbose_name='UF Emissor')),
                ('rg', models.CharField(max_length=10, unique=True, verbose_name='RG')),
                ('emissor', models.CharField(blank=True, max_length=30, null=True, verbose_name='Órgão Emissor')),
                ('reservista', models.IntegerField(blank=True, null=True, verbose_name='Certificado de Reservista')),
                ('titulo_eleitor', models.IntegerField(blank=True, db_column='titulo_Eleitor', null=True, verbose_name='Título de Eleitor')),
            ],
        ),
        migrations.CreateModel(
            name='Cargos',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=50, unique=True, verbose_name='Nome do Cargo')),
                ('descricao', models.CharField(blank=True, max_length=200, null=True, verbose_name='Descrição Detalhada')),
                ('salario_base', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Salário Base')),
                ('ativo', models.BooleanField(default=True, verbose_name='Cargo Ativo?')),
                ('cbo', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='cargos', to='departamento_pessoal.cbos', verbose_name='Classificação CBO')),
            ],
            options={
                'verbose_name': 'Cargo',
                'verbose_name_plural': 'Cargos',
                'db_table': 'cargos',
                'ordering': ['nome'],
            },
        ),
        migrations.CreateModel(
            name='Admissao',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data_admissao', models.DateField(db_column='data_Admissao', verbose_name='Data de Admissão')),
                ('matricula', models.CharField(max_length=10, unique=True, verbose_name='Matrícula')),
                ('salario', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Salário')),
                ('tipo_contrato', models.CharField(choices=[('CLT', 'CLT'), ('PJ', 'Pessoa Jurídica'), ('EST', 'Estagiário'), ('APR', 'Aprendiz')], default='CLT', max_length=3, verbose_name='Tipo de Contrato')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('cargo', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='admissoes', to='departamento_pessoal.cargos', verbose_name='Cargo')),
                ('departamento', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='admissoes', to='departamento_pessoal.departamentos', verbose_name='Departamento')),
            ],
            options={
                'verbose_name': 'Admissão',
                'verbose_name_plural': 'Admissões',
                'db_table': 'admissao',
                'ordering': ['-data_admissao'],
            },
        ),
        migrations.CreateModel(
            name='Funcionarios',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, verbose_name='Nome Completo')),
                ('data_nascimento', models.DateField(db_column='data_Nascimento', verbose_name='Data de Nascimento')),
                ('naturalidade', models.CharField(blank=True, max_length=30, null=True, verbose_name='Naturalidade')),
                ('telefone', models.CharField(blank=True, max_length=11, null=True, verbose_name='Telefone')),
                ('email', models.EmailField(max_length=254, unique=True, verbose_name='E-mail')),
                ('sexo', models.CharField(choices=[('M', 'Masculino'), ('F', 'Feminino'), ('O', 'Outro')], max_length=1, verbose_name='Sexo')),
                ('estatus', models.IntegerField(choices=[(1, 'Ativo'), (2, 'Afastado'), (3, 'Desligado'), (4, 'Férias')], default=1, verbose_name='Situação')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True, verbose_name='Data de Cadastro')),
                ('admissao', models.OneToOneField(on_delete=django.db.models.deletion.PROTECT, related_name='funcionario', to='departamento_pessoal.admissao', verbose_name='Dados de Admissão')),
                ('documentos', models.OneToOneField(on_delete=django.db.models.deletion.PROTECT, related_name='funcionario', to='departamento_pessoal.documentos', verbose_name='Documentos')),
                ('logradouro', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='funcionarios', to='logradouro.logradouro', verbose_name='Endereço')),
            ],
            options={
                'verbose_name': 'Funcionário',
                'verbose_name_plural': 'Funcionários',
                'db_table': 'funcionarios',
                'ordering': ['nome'],
            },
        ),
        migrations.AddConstraint(
            model_name='admissao',
            constraint=models.UniqueConstraint(fields=('matricula',), name='unique_matricula'),
        ),
        migrations.AddIndex(
            model_name='funcionarios',
            index=models.Index(fields=['nome'], name='idx_funcionario_nome'),
        ),
        migrations.AddIndex(
            model_name='funcionarios',
            index=models.Index(fields=['estatus'], name='idx_funcionario_status'),
        ),
    ]
