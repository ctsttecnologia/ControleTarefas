{% extends 'base.html' %}
{% load widget_tweaks %}
{% load static %}

{% block head %}
   
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!--<link rel="stylesheet" href="{% static 'csstemplate/styles.css' %}">
    <link rel="stylesheet" href="{% static 'cssdp/stylesEditaDocumentos.css' %}">
    -->

    {% block extra_css %}{% endblock %}
{% endblock %}

{% extends 'Departamento_Pessoal/cadastrar_documentos.html' %}

{% block title %}Editar Documento{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-2">Editar Documento</h4><h4 class="mb-0" align="center">{{ funcionario.nome }}</h4>
                    <p class="text-muted mb-0">Editando documento: {{ object.nome }}</p>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <div class="form-section">
                            <h5 class="section-title">Informações Básicas</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.funcionario.id_for_label }}" class="form-label">Funcionário</label>
                                    {{ form.funcionario }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.tipo.id_for_label }}" class="form-label">Tipo de Documento</label>
                                    {{ form.tipo }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.nome.id_for_label }}" class="form-label">Nome do Documento</label>
                                    {{ form.nome }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ form.sigla.id_for_label }}" class="form-label">Sigla</label>
                                    {{ form.sigla }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.data_criacao.id_for_label }}" class="form-label">Data de Criação</label>
                                    {{ form.data_criacao }}
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="{{ form.centro_custo.id_for_label }}" class="form-label">Centro de Custo</label>
                                    {{ form.centro_custo }}
                                </div>
                                <div class="col-md-4 mb-3 d-flex align-items-end">
                                    <div class="form-check form-switch">
                                        {{ form.ativo }}
                                        <label class="form-check-label" for="{{ form.ativo.id_for_label }}">Ativo</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-section" id="documentos-section">
                            <h5 class="section-title">Detalhes do Documento</h5>
                            <div class="row">
                                <div class="col-md-4 mb-3" id="cpf-field">
                                    <label for="{{ form.cpf.id_for_label }}" class="form-label">CPF</label>
                                    {{ form.cpf }}
                                    {% if object.anexo_cpf %}
                                    <small class="text-muted">
                                        <a href="{{ object.anexo_cpf.url }}" target="_blank">Ver anexo atual</a>
                                    </small>
                                    {% endif %}
                                </div>
                                <div class="col-md-4 mb-3" id="pis-field">
                                    <label for="{{ form.pis.id_for_label }}" class="form-label">PIS/PASEP</label>
                                    {{ form.pis }}
                                    {% if object.anexo_pis %}
                                    <small class="text-muted">
                                        <a href="{{ object.anexo_pis.url }}" target="_blank">Ver anexo atual</a>
                                    </small>
                                    {% endif %}
                                </div>
                                <div class="col-md-4 mb-3" id="ctps-field">
                                    <label for="{{ form.ctps.id_for_label }}" class="form-label">CTPS</label>
                                    {{ form.ctps }}
                                    {% if object.anexo_ctps %}
                                    <small class="text-muted">
                                        <a href="{{ object.anexo_ctps.url }}" target="_blank">Ver anexo atual</a>
                                    </small>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3 mb-3" id="rg-field">
                                    <label for="{{ form.rg.id_for_label }}" class="form-label">RG</label>
                                    {{ form.rg }}
                                    {% if object.anexo_rg %}
                                    <small class="text-muted">
                                        <a href="{{ object.anexo_rg.url }}" target="_blank">Ver anexo atual</a>
                                    </small>
                                    {% endif %}
                                </div>
                                <div class="col-md-3 mb-3" id="uf-field">
                                    <label for="{{ form.uf.id_for_label }}" class="form-label">UF</label>
                                    {{ form.uf }}
                                </div>
                                <div class="col-md-3 mb-3" id="emissor-field">
                                    <label for="{{ form.emissor.id_for_label }}" class="form-label">Órgão Emissor</label>
                                    {{ form.emissor }}
                                </div>
                                <div class="col-md-3 mb-3" id="reservista-field">
                                    <label for="{{ form.reservista.id_for_label }}" class="form-label">Nº Reservista</label>
                                    {{ form.reservista }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3" id="titulo-field">
                                    <label for="{{ form.titulo_eleitor.id_for_label }}" class="form-label">Título de Eleitor</label>
                                    {{ form.titulo_eleitor }}
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h5 class="section-title">Anexos</h5>
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i> Apenas faça upload de um novo arquivo se desejar substituir o anexo atual.
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3" id="anexo-cpf-field">
                                    <label for="{{ form.anexo_cpf.id_for_label }}" class="form-label">Anexo CPF</label>
                                    {{ form.anexo_cpf }}
                                </div>
                                <div class="col-md-6 mb-3" id="anexo-pis-field">
                                    <label for="{{ form.anexo_pis.id_for_label }}" class="form-label">Anexo PIS</label>
                                    {{ form.anexo_pis }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3" id="anexo-ctps-field">
                                    <label for="{{ form.anexo_ctps.id_for_label }}" class="form-label">Anexo CTPS</label>
                                    {{ form.anexo_ctps }}
                                </div>
                                <div class="col-md-6 mb-3" id="anexo-rg-field">
                                    <label for="{{ form.anexo_rg.id_for_label }}" class="form-label">Anexo RG</label>
                                    {{ form.anexo_rg }}
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between mt-4">
                            <a href="{% url 'listar_documentos' %}" class="btn btn-secondary">Cancelar</a>
                            <button type="submit" class="btn btn-submit">Atualizar Documento</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

