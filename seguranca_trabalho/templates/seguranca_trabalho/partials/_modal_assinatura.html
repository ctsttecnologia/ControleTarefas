
<div class="modal fade" id="assinaturaModal" tabindex="-1" aria-labelledby="assinaturaModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="formAssinatura" method="post" action=""> {# A action será definida por JavaScript #}
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="assinaturaModalLabel">Assinatura de Recebimento</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Eu, {{ ficha.funcionario.nome_completo }}, confirmo o recebimento do EPI descrito.</p>
                    
                    <div class="wrapper-assinatura border">
                        <canvas id="signature-pad" class="signature-pad"></canvas>
                    </div>

                    <input type="hidden" name="assinatura_base64" id="assinatura_base64">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="clear-signature">Limpar</button>
                    <button type="submit" class="btn btn-primary" id="save-signature">Salvar Assinatura</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
/* Estilo para a área da assinatura */
.wrapper-assinatura {
    position: relative;
    width: 100%;
    height: 200px;
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background-color: #f8f9fa;
}
.signature-pad {
    position: absolute;
    left: 0;
    top: 0;
    width:100%;
    height:100%;
}
</style>
